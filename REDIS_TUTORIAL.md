# ğŸ”´ REDIS TUTORIAL - HÆ¯á»šNG DáºªN TOÃ€N DIá»†N CHO NGÆ¯á»œI Má»šI

## ğŸ“š Má»¤C Lá»¤C
1. [Redis lÃ  gÃ¬?](#1-redis-lÃ -gÃ¬)
2. [Táº¡i sao dÃ¹ng Redis?](#2-táº¡i-sao-dÃ¹ng-redis)
3. [CÃ i Ä‘áº·t Redis](#3-cÃ i-Ä‘áº·t-redis)
4. [Cáº¥u hÃ¬nh trong Laravel](#4-cáº¥u-hÃ¬nh-trong-laravel)
5. [CÃ¡c file quan trá»ng cáº§n hiá»ƒu](#5-cÃ¡c-file-quan-trá»ng-cáº§n-hiá»ƒu)
6. [CÃ¡c lá»‡nh Redis cÆ¡ báº£n](#6-cÃ¡c-lá»‡nh-redis-cÆ¡-báº£n)
7. [Sá»­ dá»¥ng Redis trong dá»± Ã¡n](#7-sá»­-dá»¥ng-redis-trong-dá»±-Ã¡n)
8. [Thá»±c hÃ nh vá»›i dá»± Ã¡n Blog](#8-thá»±c-hÃ nh-vá»›i-dá»±-Ã¡n-blog)

---

## 1. Redis lÃ  gÃ¬?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         REDIS                                    â”‚
â”‚                                                                  â”‚
â”‚   RE mote       â†’ Tá»« xa (cÃ³ thá»ƒ cháº¡y trÃªn server riÃªng)         â”‚
â”‚   DI ctionary   â†’ Tá»« Ä‘iá»ƒn (lÆ°u dáº¡ng key-value)                  â”‚
â”‚   S erver       â†’ Server (cháº¡y nhÆ° má»™t service)                 â”‚
â”‚                                                                  â”‚
â”‚   = In-Memory Data Store (LÆ°u dá»¯ liá»‡u trong RAM)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### So sÃ¡nh tá»‘c Ä‘á»™:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Tá»C Äá»˜ TRUY XUáº¤T Dá»® LIá»†U                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  MongoDB (SSD)     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  ~1-10ms             â”‚
â”‚                                                                  â”‚
â”‚  Redis (RAM)       â–ˆâ–ˆ  ~0.1-0.5ms                                â”‚
â”‚                                                                  â”‚
â”‚  â†’ Redis nhanh hÆ¡n 10-100 láº§n!                                   â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Redis lÆ°u gÃ¬?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Cáº¤U TRÃšC KEY-VALUE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   KEY (String)              VALUE (Nhiá»u kiá»ƒu)                  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚   "user:123:name"     â†’     "John Doe"                          â”‚
â”‚   "user:123:online"   â†’     true                                â”‚
â”‚   "post:456:views"    â†’     1500                                â”‚
â”‚   "session:abc123"    â†’     {user_id: 123, ...}                 â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Táº¡i sao dÃ¹ng Redis?

### Trong dá»± Ã¡n nÃ y, Redis Ä‘Æ°á»£c dÃ¹ng cho 3 má»¥c Ä‘Ã­ch:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 3 CÃCH DÃ™NG REDIS TRONG Dá»° ÃN                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1ï¸âƒ£  SESSION STORAGE (LÆ°u phiÃªn Ä‘Äƒng nháº­p)                      â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚      â”‚ User Ä‘Äƒng nháº­p â†’ Táº¡o Session ID             â”‚            â”‚
â”‚      â”‚ Session ID lÆ°u vÃ o Redis (khÃ´ng pháº£i file)  â”‚            â”‚
â”‚      â”‚ Nhanh hÆ¡n + CÃ³ thá»ƒ scale nhiá»u server       â”‚            â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                  â”‚
â”‚  2ï¸âƒ£  CACHE (LÆ°u dá»¯ liá»‡u táº¡m)                                    â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚      â”‚ Query MongoDB â†’ LÆ°u káº¿t quáº£ vÃ o Redis       â”‚            â”‚
â”‚      â”‚ Láº§n sau: Láº¥y tá»« Redis (khÃ´ng query láº¡i)     â”‚            â”‚
â”‚      â”‚ Giáº£m táº£i cho MongoDB Ä‘Ã¡ng ká»ƒ                â”‚            â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                  â”‚
â”‚  3ï¸âƒ£  COUNTERS & TRACKING (Äáº¿m + Theo dÃµi)                       â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚      â”‚ Äáº¿m lÆ°á»£t xem bÃ i viáº¿t                       â”‚            â”‚
â”‚      â”‚ Theo dÃµi user online                        â”‚            â”‚
â”‚      â”‚ Äáº¿m sá»‘ láº§n Ä‘Äƒng nháº­p                        â”‚            â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. CÃ i Ä‘áº·t Redis

### CÃ¡ch 1: Docker (KhuyÃªn dÃ¹ng)

```bash
# Cháº¡y Redis container
docker run -d --name redis -p 6379:6379 redis:latest

# Kiá»ƒm tra Ä‘Ã£ cháº¡y chÆ°a
docker ps

# Khá»Ÿi Ä‘á»™ng láº¡i (náº¿u Ä‘Ã£ táº¯t mÃ¡y)
docker start redis
```

### CÃ¡ch 2: CÃ i thÆ° viá»‡n PHP

```bash
# Dá»± Ã¡n nÃ y dÃ¹ng Predis (pure PHP - khÃ´ng cáº§n cÃ i extension)
composer require predis/predis
```

---

## 4. Cáº¥u hÃ¬nh trong Laravel

### ğŸ“ CÃ¡c file cáº¥u hÃ¬nh cáº§n biáº¿t:

```
laravel/
â”œâ”€â”€ .env                    â† Biáº¿n mÃ´i trÆ°á»ng
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ database.php        â† Cáº¥u hÃ¬nh Redis connection
â”‚   â”œâ”€â”€ cache.php           â† Cáº¥u hÃ¬nh Cache dÃ¹ng Redis
â”‚   â””â”€â”€ session.php         â† Cáº¥u hÃ¬nh Session dÃ¹ng Redis
```

### ğŸ“„ File `.env` - Cáº¥u hÃ¬nh mÃ´i trÆ°á»ng

```env
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# REDIS CONFIGURATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Client sá»­ dá»¥ng (predis = pure PHP, phpredis = C extension)
REDIS_CLIENT=predis

# Server Redis (localhost náº¿u cháº¡y local/docker)
REDIS_HOST=127.0.0.1
REDIS_PORT=6379

# Password (Ä‘á»ƒ trá»‘ng náº¿u khÃ´ng cÃ³)
REDIS_PASSWORD=null

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Sá»¬ Dá»¤NG REDIS CHO SESSION VÃ€ CACHE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Session lÆ°u vÃ o Redis (thay vÃ¬ file)
SESSION_DRIVER=redis

# Cache lÆ°u vÃ o Redis (thay vÃ¬ file)
CACHE_STORE=redis
```

---

## 5. CÃ¡c file quan trá»ng cáº§n hiá»ƒu

### ğŸ“„ `config/database.php` - Cáº¥u hÃ¬nh káº¿t ná»‘i Redis

```php
'redis' => [
    // Client: 'predis' hoáº·c 'phpredis'
    'client' => env('REDIS_CLIENT', 'predis'),

    'options' => [
        'cluster' => env('REDIS_CLUSTER', 'redis'),
        // Prefix cho táº¥t cáº£ key (trÃ¡nh trÃ¹ng vá»›i app khÃ¡c)
        'prefix' => env('REDIS_PREFIX', 'laravel_blog_'),
    ],

    // Connection máº·c Ä‘á»‹nh (cho Session + tá»•ng quÃ¡t)
    'default' => [
        'host' => env('REDIS_HOST', '127.0.0.1'),
        'port' => env('REDIS_PORT', '6379'),
        'database' => env('REDIS_DB', '0'),      // Database sá»‘ 0
    ],

    // Connection riÃªng cho Cache
    'cache' => [
        'host' => env('REDIS_HOST', '127.0.0.1'),
        'port' => env('REDIS_PORT', '6379'),
        'database' => env('REDIS_CACHE_DB', '1'), // Database sá»‘ 1
    ],
],
```

**ğŸ’¡ Giáº£i thÃ­ch Database Number:**
```
Redis cÃ³ 16 database (0-15), giá»‘ng nhÆ° cÃ¡c "ngÄƒn" riÃªng biá»‡t:

Database 0 â†’ Session, tracking user
Database 1 â†’ Cache (posts, categories)
Database 2 â†’ Queue (náº¿u dÃ¹ng)
...

TÃ¡ch riÃªng Ä‘á»ƒ dá»… quáº£n lÃ½ vÃ  flush (xÃ³a) Ä‘á»™c láº­p.
```

### ğŸ“„ `config/session.php` - Session dÃ¹ng Redis

```php
return [
    // Driver: 'redis' thay vÃ¬ 'file'
    'driver' => env('SESSION_DRIVER', 'redis'),
    
    // Thá»i gian sá»‘ng cá»§a session (phÃºt)
    'lifetime' => env('SESSION_LIFETIME', 120), // 2 giá»
    
    // Redis connection sá»­ dá»¥ng
    'store' => env('SESSION_STORE', 'redis'),
    
    // Cookie settings (quan trá»ng cho React frontend)
    'same_site' => 'lax',  // Cho phÃ©p gá»­i cookie cross-origin
];
```

### ğŸ“„ `config/cache.php` - Cache dÃ¹ng Redis

```php
return [
    // Default cache store
    'default' => env('CACHE_STORE', 'redis'),

    'stores' => [
        'redis' => [
            'driver' => 'redis',
            'connection' => 'cache', // DÃ¹ng connection 'cache' tá»« database.php
        ],
    ],
];
```

---

## 6. CÃ¡c lá»‡nh Redis cÆ¡ báº£n

### ğŸ“‹ Báº£ng tÃ³m táº¯t lá»‡nh:

| Lá»‡nh | Ã nghÄ©a | VÃ­ dá»¥ Laravel |
|------|---------|---------------|
| `SET` | LÆ°u giÃ¡ trá»‹ | `Redis::set('key', 'value')` |
| `GET` | Láº¥y giÃ¡ trá»‹ | `Redis::get('key')` |
| `DEL` | XÃ³a key | `Redis::del('key')` |
| `INCR` | TÄƒng sá»‘ +1 | `Redis::incr('counter')` |
| `DECR` | Giáº£m sá»‘ -1 | `Redis::decr('counter')` |
| `EXPIRE` | Äáº·t thá»i gian háº¿t háº¡n | `Redis::expire('key', 3600)` |
| `TTL` | Xem cÃ²n bao lÃ¢u háº¿t háº¡n | `Redis::ttl('key')` |
| `EXISTS` | Kiá»ƒm tra key tá»“n táº¡i | `Redis::exists('key')` |
| `KEYS` | TÃ¬m keys theo pattern | `Redis::keys('user:*')` |

### ğŸ’» VÃ­ dá»¥ chi tiáº¿t:

```php
use Illuminate\Support\Facades\Redis;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 1. SET - LÆ°u giÃ¡ trá»‹
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// LÆ°u Ä‘Æ¡n giáº£n
Redis::set('user:123:name', 'John Doe');

// LÆ°u vá»›i thá»i gian háº¿t háº¡n (EX = seconds)
Redis::set('user:123:online', 'true', 'EX', 7200);  // 2 giá»

// Hoáº·c dÃ¹ng setex
Redis::setex('temp_data', 60, 'value');  // 60 giÃ¢y

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 2. GET - Láº¥y giÃ¡ trá»‹
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

$name = Redis::get('user:123:name');      // "John Doe"
$online = Redis::get('user:123:online');  // "true"
$notExist = Redis::get('not:exist');      // null

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 3. INCR/DECR - TÄƒng/Giáº£m sá»‘
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// TÄƒng view count
Redis::incr('post:456:views');     // 1 (náº¿u chÆ°a cÃ³)
Redis::incr('post:456:views');     // 2
Redis::incr('post:456:views');     // 3

// Giáº£m
Redis::decr('stock:item:100');    // Giáº£m sá»‘ lÆ°á»£ng tá»“n kho

// TÄƒng/giáº£m nhiá»u
Redis::incrby('post:456:views', 10);  // +10
Redis::decrby('stock:item:100', 5);   // -5

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 4. DEL - XÃ³a key
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Redis::del('user:123:online');           // XÃ³a 1 key
Redis::del(['key1', 'key2', 'key3']);    // XÃ³a nhiá»u key

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 5. EXISTS - Kiá»ƒm tra tá»“n táº¡i
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

if (Redis::exists('user:123:online')) {
    echo "User Ä‘ang online";
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 6. EXPIRE & TTL - Quáº£n lÃ½ thá»i gian sá»‘ng
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Äáº·t thá»i gian háº¿t háº¡n cho key Ä‘Ã£ tá»“n táº¡i
Redis::expire('user:123:session', 3600);  // 1 giá»

// Kiá»ƒm tra cÃ²n bao lÃ¢u
$ttl = Redis::ttl('user:123:session');    // Sá»‘ giÃ¢y cÃ²n láº¡i
// -1 = khÃ´ng cÃ³ expire, -2 = key khÃ´ng tá»“n táº¡i
```

---

## 7. Sá»­ dá»¥ng Redis trong dá»± Ã¡n

### 7.1. Cache Facade - LÆ°u cache dá»¯ liá»‡u

```php
use Illuminate\Support\Facades\Cache;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Cache::remember() - Tá»± Ä‘á»™ng láº¥y tá»« cache hoáº·c táº¡o má»›i
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

$posts = Cache::remember('all_posts', 3600, function () {
    // Code nÃ y CHá»ˆ cháº¡y khi cache MISS (khÃ´ng cÃ³ trong cache)
    return Post::with('user', 'category')->get();
});

/*
Luá»“ng hoáº¡t Ä‘á»™ng:
1. Kiá»ƒm tra Redis cÃ³ key 'all_posts' khÃ´ng?
2. Náº¿u CÃ“ (cache hit)  â†’ Tráº£ vá» dá»¯ liá»‡u tá»« Redis ngay
3. Náº¿u KHÃ”NG (cache miss) â†’ Cháº¡y callback â†’ Query MongoDB â†’ LÆ°u vÃ o Redis â†’ Tráº£ vá»
*/

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Cache::put() - LÆ°u trá»±c tiáº¿p
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Cache::put('user_profile_123', $userData, 3600);  // 1 giá»
Cache::put('settings', $settings, now()->addDays(7));  // 7 ngÃ y

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Cache::get() - Láº¥y tá»« cache
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

$data = Cache::get('user_profile_123');
$data = Cache::get('not_exist', 'default_value');  // Vá»›i default

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Cache::forget() - XÃ³a cache cá»¥ thá»ƒ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Cache::forget('all_posts');         // XÃ³a 1 key
Cache::forget('post_123');          // XÃ³a cache cá»§a 1 post

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Cache::flush() - XÃ³a Táº¤T Cáº¢ cache
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Cache::flush();  // âš ï¸ Cáº©n tháº­n! XÃ³a háº¿t cache

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Cache::has() - Kiá»ƒm tra cache tá»“n táº¡i
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

if (Cache::has('all_posts')) {
    echo "Cache Ä‘Ã£ tá»“n táº¡i";
}
```

### 7.2. Redis Facade - Thao tÃ¡c trá»±c tiáº¿p

```php
use Illuminate\Support\Facades\Redis;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Tracking user online
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Khi user login
Redis::set("user:{$userId}:online", 'true', 'EX', 7200);

// Khi user logout
Redis::del("user:{$userId}:online");

// Kiá»ƒm tra user online
if (Redis::exists("user:{$userId}:online")) {
    echo "User Ä‘ang online";
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Äáº¿m lÆ°á»£t xem (view counter)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Má»—i khi cÃ³ ngÆ°á»i xem bÃ i viáº¿t
Redis::incr("post:{$postId}:views");

// Láº¥y sá»‘ lÆ°á»£t xem
$views = Redis::get("post:{$postId}:views") ?? 0;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Rate Limiting (giá»›i háº¡n request)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

$key = "rate_limit:{$userId}";
$limit = 100;  // 100 request
$window = 60;  // trong 60 giÃ¢y

$current = Redis::incr($key);
if ($current === 1) {
    Redis::expire($key, $window);
}

if ($current > $limit) {
    return response('Too many requests', 429);
}
```

---

## 8. Thá»±c hÃ nh vá»›i dá»± Ã¡n Blog

### ğŸ“ File `app/Http/Controllers/API/AuthController.php`

```php
<?php

namespace App\Http\Controllers\API;

use Illuminate\Support\Facades\Redis;
use Illuminate\Support\Facades\Auth;

class AuthController extends Controller
{
    public function login(Request $request)
    {
        // ... validate vÃ  check password ...

        // ÄÄƒng nháº­p (Laravel tá»± Ä‘á»™ng lÆ°u session vÃ o Redis)
        Auth::login($user);

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // REDIS: Tracking user online
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        // Key: "user:abc123:online"
        // Value: "true"  
        // Háº¿t háº¡n: 7200 giÃ¢y (2 giá»)
        Redis::set("user:{$user->_id}:online", 'true', 'EX', 7200);
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // REDIS: Äáº¿m sá»‘ láº§n Ä‘Äƒng nháº­p
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        // Key: "user:abc123:login_count"
        // Má»—i láº§n login: +1
        Redis::incr("user:{$user->_id}:login_count");

        return response()->json(['message' => 'Logged in', 'user' => $user]);
    }

    public function logout(Request $request)
    {
        $user = Auth::user();

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // REDIS: XÃ³a tracking online
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        if ($user) {
            Redis::del("user:{$user->_id}:online");
        }

        Auth::logout();
        
        return response()->json(['message' => 'Logged out']);
    }
}
```

### ğŸ“ File `app/Http/Controllers/API/PostController.php`

```php
<?php

namespace App\Http\Controllers\API;

use Illuminate\Support\Facades\Cache;
use Illuminate\Support\Facades\Redis;

class PostController extends Controller
{
    public function index(Request $request)
    {
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CACHE: Táº¡o cache key unique cho má»—i query
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        // VÃ­ dá»¥: posts_abc123 (md5 cá»§a query params)
        $cacheKey = 'posts_' . md5(json_encode($request->all()));
        
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CACHE: Láº¥y tá»« cache hoáº·c query má»›i
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        $posts = Cache::remember($cacheKey, 3600, function () use ($request) {
            // Code nÃ y chá»‰ cháº¡y khi cache miss
            return Post::with(['user', 'category'])->paginate(10);
        });

        return response()->json($posts);
    }

    public function show($id)
    {
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CACHE: Cache chi tiáº¿t bÃ i viáº¿t
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        $post = Cache::remember("post_{$id}", 3600, function () use ($id) {
            return Post::with(['user', 'category', 'comments'])->findOrFail($id);
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // REDIS: Äáº¿m lÆ°á»£t xem (khÃ´ng dÃ¹ng Cache, dÃ¹ng Redis trá»±c tiáº¿p)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        // TÄƒng view +1 (cá»±c nhanh, khÃ´ng cáº§n query MongoDB)
        Redis::incr("post:{$id}:views");
        
        // Láº¥y tá»•ng views
        $views = Redis::get("post:{$id}:views") ?? 0;
        $post->views_count = (int) $views;

        return response()->json($post);
    }

    public function store(Request $request)
    {
        // ... táº¡o post má»›i ...

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CACHE: XÃ³a cache khi cÃ³ dá»¯ liá»‡u má»›i
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        Cache::flush();  // XÃ³a táº¥t cáº£ cache Ä‘á»ƒ hiá»ƒn thá»‹ data má»›i

        return response()->json($post, 201);
    }

    public function update(Request $request, $id)
    {
        // ... cáº­p nháº­t post ...

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CACHE: XÃ³a cache cá»§a post cá»¥ thá»ƒ
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        Cache::forget("post_{$id}");  // Chá»‰ xÃ³a cache cá»§a post nÃ y
        Cache::flush();               // Hoáº·c xÃ³a háº¿t

        return response()->json($post);
    }
}
```

---

## ğŸ“Š SÆ¡ Ä‘á»“ luá»“ng hoáº¡t Ä‘á»™ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LUá»’NG CACHE KHI Äá»ŒC BÃ€I VIáº¾T                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   Client Request: GET /api/posts/123                                    â”‚
â”‚         â”‚                                                               â”‚
â”‚         â–¼                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚  PostController@show($id = 123)                         â”‚          â”‚
â”‚   â”‚                                                         â”‚          â”‚
â”‚   â”‚  Cache::remember('post_123', 3600, function() {...})    â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                             â”‚                                           â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚              â”‚     Redis: GET post_123      â”‚                           â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                             â”‚                                           â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚         â”‚                   â”‚                   â”‚                      â”‚
â”‚    Cache HIT âœ…         Cache MISS âŒ                                   â”‚
â”‚    (cÃ³ trong Redis)     (khÃ´ng cÃ³)                                      â”‚
â”‚         â”‚                   â”‚                                           â”‚
â”‚         â”‚                   â–¼                                           â”‚
â”‚         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚         â”‚         â”‚  Query MongoDB   â”‚                                  â”‚
â”‚         â”‚         â”‚  Post::find(123) â”‚                                  â”‚
â”‚         â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚         â”‚                  â”‚                                            â”‚
â”‚         â”‚                  â–¼                                            â”‚
â”‚         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚         â”‚         â”‚  LÆ°u vÃ o Redis   â”‚                                  â”‚
â”‚         â”‚         â”‚  SET post_123    â”‚                                  â”‚
â”‚         â”‚         â”‚  TTL: 3600s      â”‚                                  â”‚
â”‚         â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚         â”‚                  â”‚                                            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                  â”‚                                                      â”‚
â”‚                  â–¼                                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚         â”‚  Redis: INCR     â”‚  â† TÄƒng view count                        â”‚
â”‚         â”‚  post:123:views  â”‚                                           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚                  â”‚                                                      â”‚
â”‚                  â–¼                                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚         â”‚  Response JSON   â”‚                                            â”‚
â”‚         â”‚  {post + views}  â”‚                                            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LUá»’NG SESSION KHI ÄÄ‚NG NHáº¬P                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   Client: POST /api/login {email, password}                             â”‚
â”‚         â”‚                                                               â”‚
â”‚         â–¼                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚  AuthController@login()                                 â”‚          â”‚
â”‚   â”‚                                                         â”‚          â”‚
â”‚   â”‚  1. Validate credentials                                â”‚          â”‚
â”‚   â”‚  2. Auth::login($user)                                  â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                             â”‚                                           â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚              â”‚     Laravel tá»± Ä‘á»™ng:         â”‚                           â”‚
â”‚              â”‚                              â”‚                           â”‚
â”‚              â”‚  1. Táº¡o Session ID          â”‚                           â”‚
â”‚              â”‚     "abc123xyz..."           â”‚                           â”‚
â”‚              â”‚                              â”‚                           â”‚
â”‚              â”‚  2. LÆ°u vÃ o Redis:           â”‚                           â”‚
â”‚              â”‚     SET laravel_session:abc  â”‚                           â”‚
â”‚              â”‚     {user_id, data...}       â”‚                           â”‚
â”‚              â”‚                              â”‚                           â”‚
â”‚              â”‚  3. Gá»­i Cookie vá» browser:   â”‚                           â”‚
â”‚              â”‚     Set-Cookie: session=abc  â”‚                           â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                             â”‚                                           â”‚
â”‚                             â–¼                                           â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚              â”‚  Custom tracking:            â”‚                           â”‚
â”‚              â”‚                              â”‚                           â”‚
â”‚              â”‚  Redis::set(                 â”‚                           â”‚
â”‚              â”‚    "user:123:online",        â”‚                           â”‚
â”‚              â”‚    "true",                   â”‚                           â”‚
â”‚              â”‚    "EX", 7200                â”‚                           â”‚
â”‚              â”‚  )                           â”‚                           â”‚
â”‚              â”‚                              â”‚                           â”‚
â”‚              â”‚  Redis::incr(                â”‚                           â”‚
â”‚              â”‚    "user:123:login_count"    â”‚                           â”‚
â”‚              â”‚  )                           â”‚                           â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                             â”‚                                           â”‚
â”‚                             â–¼                                           â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚              â”‚  Response:                   â”‚                           â”‚
â”‚              â”‚  {message, user}             â”‚                           â”‚
â”‚              â”‚  + Set-Cookie header         â”‚                           â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Debug Redis

### Kiá»ƒm tra káº¿t ná»‘i:

```bash
# VÃ o Redis CLI trong Docker
docker exec -it redis redis-cli

# Kiá»ƒm tra káº¿t ná»‘i
127.0.0.1:6379> PING
PONG

# Xem táº¥t cáº£ keys
127.0.0.1:6379> KEYS *

# Xem keys theo pattern
127.0.0.1:6379> KEYS user:*
127.0.0.1:6379> KEYS post:*

# Xem giÃ¡ trá»‹
127.0.0.1:6379> GET "laravel_blog_cache_post_123"

# Xem TTL
127.0.0.1:6379> TTL "laravel_blog_cache_post_123"

# XÃ³a táº¥t cáº£ (cáº©n tháº­n!)
127.0.0.1:6379> FLUSHALL
```

### Test trong Laravel Tinker:

```bash
php artisan tinker

# Test Redis
>>> Redis::ping()
=> "PONG"

>>> Redis::set('test', 'hello')
=> true

>>> Redis::get('test')
=> "hello"

# Test Cache
>>> Cache::put('test_cache', 'world', 60)
=> true

>>> Cache::get('test_cache')
=> "world"
```

---

## ğŸ“ TÃ³m táº¯t

| KhÃ¡i niá»‡m | Ã nghÄ©a | File cáº¥u hÃ¬nh |
|-----------|---------|---------------|
| **Redis** | In-memory database, lÆ°u trong RAM | `config/database.php` |
| **Session** | PhiÃªn Ä‘Äƒng nháº­p cá»§a user | `config/session.php` |
| **Cache** | Dá»¯ liá»‡u táº¡m Ä‘á»ƒ tÄƒng tá»‘c | `config/cache.php` |
| **Predis** | PHP client Ä‘á»ƒ káº¿t ná»‘i Redis | `composer.json` |

| Facade | Má»¥c Ä‘Ã­ch | VÃ­ dá»¥ |
|--------|----------|-------|
| `Cache::` | LÆ°u/láº¥y cache | `Cache::remember()`, `Cache::forget()` |
| `Redis::` | Thao tÃ¡c Redis trá»±c tiáº¿p | `Redis::set()`, `Redis::incr()` |

| Lá»‡nh Docker | Má»¥c Ä‘Ã­ch |
|-------------|----------|
| `docker start redis` | Khá»Ÿi Ä‘á»™ng Redis |
| `docker exec -it redis redis-cli` | VÃ o Redis CLI |
| `docker logs redis` | Xem log Redis |

---

**ğŸ¯ BÃ i táº­p thá»±c hÃ nh:**

1. Má»Ÿ Redis CLI vÃ  xem cÃ¡c keys Ä‘ang cÃ³
2. Login vÃ o app vÃ  kiá»ƒm tra key `user:xxx:online` xuáº¥t hiá»‡n
3. Xem má»™t bÃ i viáº¿t vÃ  kiá»ƒm tra `post:xxx:views` tÄƒng lÃªn
4. Thá»­ `Cache::flush()` trong Tinker vÃ  xem performance thay Ä‘á»•i

**ChÃºc báº¡n há»c tá»‘t! ğŸš€**
